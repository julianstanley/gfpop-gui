# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
cache: packages
warnings_are_errors: false
r_packages:
  - covr
  - rsconnect
  - devtools
  - memoise
  - parsedate
  - plyr
  - rappdirs
  - rcmdcheck
  - rematch
  - rhub
  - rversions

r_github_packages:
  - julianstanley/gfpop-gui

after_success:
  - Rscript -e 'covr::codecov()'
  
# Added for RSelenium tests
sudo: required

services:
  - docker

before_install:
  - docker pull selenium/standalone-firefox:2.53.0
  - docker run -d -p 127.0.0.1:4444:4444 selenium/standalone-firefox:2.53.0
  - Rscript -e 'golem::detach_all_attached();golem::document_and_reload();options(shiny.port = 11616);run_app()' &


# Added for shinyapps.io deployment
# dist: xenial
# sudo: false
# latex: false
# 
# deploy:
#   provider: script
#   script: 
#     - R -f deploy.R
#   on:
#     branch: master