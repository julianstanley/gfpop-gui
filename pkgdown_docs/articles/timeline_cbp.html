<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSOC 2020 Timeline Updates: CBP • gfpopgui</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GSOC 2020 Timeline Updates: CBP">
<meta property="og:description" content="gfpopgui">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfpopgui</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/timeline_cbp.html">GSOC 2020 Timeline Updates: CBP</a>
    </li>
    <li>
      <a href="../articles/timeline_phase1.html">GSOC 2020 Timeline Updates: Phase 1</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://github.com/julianstanley/gfpopgui/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="timeline_cbp_files/header-attrs-2.3/header-attrs.js"></script><script src="timeline_cbp_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>25 May 2020 - 31 May 2020</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/julianstanley/gfpopgui/blob/master/vignettes/timeline_cbp.Rmd"><code>vignettes/timeline_cbp.Rmd</code></a></small>
      <div class="hidden name"><code>timeline_cbp.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Hi! I will update this section of the website as I progress through Google Summer of Code (GSOC) 2020. It will include my goals and progress for each week in the program, as well as notes about any observations or surprises.</p>
<p>In my GSOC application, I mentioned keeping a log of my progress in a “progress.md” file. This webpage will hopefully serve as a more easily-accessible version of that idea.</p>
<p>This page specifically contains updates for the Community Bonding Period (CBP).</p>
</div>
<div id="community-bonding-period" class="section level1">
<h1 class="hasAnchor">
<a href="#community-bonding-period" class="anchor"></a>Community Bonding Period</h1>
<div id="may-04---may-10" class="section level2">
<h2 class="hasAnchor">
<a href="#may-04---may-10" class="anchor"></a>May 04 - May 10</h2>
<p>Goals:</p>
<ul>
<li>Research existing applications with similar features to what we want with the gfpopgui.</li>
<li>Sketch the layout of the gfpopgui in more detail. This should include an itemized checklist of desired features.</li>
</ul>
<div id="existing-applications" class="section level3">
<h3 class="hasAnchor">
<a href="#existing-applications" class="anchor"></a>Existing Applications</h3>
<div id="shinydag" class="section level4">
<h4 class="hasAnchor">
<a href="#shinydag" class="anchor"></a>shinyDAG</h4>
<p><a href="https://github.com/GerkeLab/shinyDAG">GitHub link</a></p>
<p>A web application that uses R and LaTeX to create publication-quality images of directed acyclic graphs (DAGs).</p>
<p>They allow users to create directed graphs, but I think the interface is a little bit clunky. They preview graphs with Plotly, but I don’t think all of the Plolty features are necessary.</p>
<p>However, I really like how they add nodes: you click “Add New Node” and then you enter properties of the node (in this case, just the name) into a text box. I may want to do something similar with the gfpopgui.</p>
<p>They represent nodes as a list with a name, x cord, and y cord. Seems to identify edges by the IDs of the nodes which they connect, so breaks when nodes have the same name.</p>
<p>Conclusion: Great reference for an interface for creating nodes and interacting between javascript and R.</p>
</div>
<div id="d3-dynamic-report" class="section level4">
<h4 class="hasAnchor">
<a href="#d3-dynamic-report" class="anchor"></a>D3 Dynamic Report</h4>
<p><a href="https://github.com/jienagu/D3_folded_charts">GitHub link</a></p>
<p>Just an example of integrating D3 and Shiny. Besides that, not useful in this context, I don’t think.</p>
</div>
<div id="interactive-tool-for-creating-directed-graphs-using-d3-js" class="section level4">
<h4 class="hasAnchor">
<a href="#interactive-tool-for-creating-directed-graphs-using-d3-js" class="anchor"></a>Interactive tool for creating directed graphs using d3.js</h4>
<p><a href="https://bl.ocks.org/cjrd/6863459">bl.cks link</a></p>
<p>This block is central to and will probably be the basis of the gfpopgui application.</p>
<p>It describes making an editable directed graph with D3 (just javascript, no Shiny).</p>
</div>
<div id="rstudioconf-shiny-app" class="section level4">
<h4 class="hasAnchor">
<a href="#rstudioconf-shiny-app" class="anchor"></a>rstudio::conf shiny app</h4>
<p><a href="https://gadenbuie.shinyapps.io/tweet-conf-dash/">Shinyapp.io link</a></p>
<p>This app isn’t remotely related to gfpopgui, but I really like the layout. It uses the same basic shiny dashboard that people use all the time, but it just feels very nice and clean. It would be great to emulate parts of the design.</p>
</div>
<div id="thinkr-tidytuesday-2019-10-15" class="section level4">
<h4 class="hasAnchor">
<a href="#thinkr-tidytuesday-2019-10-15" class="anchor"></a>thinkr TidyTuesday 2019-10-15</h4>
<p><a href="https://connect.thinkr.fr/tidytuesday201942/">Application link</a></p>
<p>Or maybe this sort of layout would be nicer? It’s definitely simplier, and maybe more intuititive?</p>
</div>
<div id="more" class="section level4">
<h4 class="hasAnchor">
<a href="#more" class="anchor"></a>More?</h4>
<p>I’m really surprised that I’m having this much trouble finding more applications that are similar to what we would like to do. It’s exciting–since it means that we’re doing something somewhat unique–but also a bit scary.</p>
<p>I’ll keep casually looking for more model applications, and make a note to ask about this in my first meeting with Guillem and Toby next week.</p>
</div>
</div>
<div id="layout" class="section level3">
<h3 class="hasAnchor">
<a href="#layout" class="anchor"></a>Layout</h3>
<p>I was off to a slow start this week, so I’m going to move the layout goal to early next week (starting tomorrow!).</p>
</div>
<div id="future-directions" class="section level3">
<h3 class="hasAnchor">
<a href="#future-directions" class="anchor"></a>Future Directions</h3>
<p>I want to make sure that my base knowledge of Shiny is up to par. I’ve never been super satisifed with the available books, but Hadley Wickham is writing one now! It’s not nearly done yet, but I’ll run through what’s already written. <a href="https://mastering-shiny.org/">Link</a>.</p>
</div>
</div>
<div id="may-11---may-17" class="section level2">
<h2 class="hasAnchor">
<a href="#may-11---may-17" class="anchor"></a>May 11 - May 17</h2>
<div id="goals" class="section level3">
<h3 class="hasAnchor">
<a href="#goals" class="anchor"></a>Goals</h3>
<ul>
<li>(Carry-over from last week): app layout sketch, itemized checklist of features we want in the app.</li>
<li>Read the gfpop paper and package documentation in more detail, and make sure to write down questions to ask Guillem and Toby in meeting on Friday.</li>
<li>Think about setting up coding environment: make notes about how you are going to do that, review those with Guillem and Toby on Friday, and then implement them on Friday/Saturday.</li>
</ul>
</div>
<div id="app-layout" class="section level3">
<h3 class="hasAnchor">
<a href="#app-layout" class="anchor"></a>App Layout</h3>
<div id="sketches" class="section level4">
<h4 class="hasAnchor">
<a href="#sketches" class="anchor"></a>Sketches</h4>
<div id="welcome-tab" class="section level5">
<h5 class="hasAnchor">
<a href="#welcome-tab" class="anchor"></a>Welcome Tab</h5>
<div class="figure">
<img src="https://github.com/julianstanley/gfpopgui/raw/master/docs/assets/may11_may17/layout_1.JPG" alt=""><p class="caption">picture of welcome tab layout sketch</p>
</div>
</div>
<div id="analysis-tab" class="section level5">
<h5 class="hasAnchor">
<a href="#analysis-tab" class="anchor"></a>Analysis Tab</h5>
<div class="figure">
<img src="https://github.com/julianstanley/gfpopgui/raw/master/docs/assets/may11_may17/layout_2.JPG" alt=""><p class="caption">picture of analysis tab layout sketch</p>
</div>
</div>
<div id="sharing-tab" class="section level5">
<h5 class="hasAnchor">
<a href="#sharing-tab" class="anchor"></a>Sharing Tab</h5>
<div class="figure">
<img src="https://github.com/julianstanley/gfpopgui/raw/master/docs/assets/may11_may17/layout_3.JPG" alt=""><p class="caption">picture of sharing tab layout sketch</p>
</div>
</div>
<div id="help-tab" class="section level5">
<h5 class="hasAnchor">
<a href="#help-tab" class="anchor"></a>Help Tab</h5>
<div class="figure">
<img src="https://github.com/julianstanley/gfpopgui/raw/master/docs/assets/may11_may17/layout_4.JPG" alt=""><p class="caption">picture of help tab layout sketch</p>
</div>
</div>
</div>
<div id="components-list" class="section level4">
<h4 class="hasAnchor">
<a href="#components-list" class="anchor"></a>Components List</h4>
<ol style="list-style-type: decimal">
<li>Welcome page
<ul>
<li>Title and subtitle</li>
<li>Overview and instructions</li>
<li>Data upload area
<ol style="list-style-type: decimal">
<li>Upload option: .Rdata file with completed analysis</li>
<li>Upload option: .csv file with input data</li>
<li>Upload option: .csv file with directed graph</li>
</ol>
</li>
</ul>
</li>
<li>Analysis page
<ul>
<li>Main analysis plot (one large D3 plot)
<ol style="list-style-type: decimal">
<li>User data plot
<ul>
<li>Overlain: changepoint predictions</li>
</ul>
</li>
<li>Directed graph constraint</li>
</ol>
</li>
<li>Post-hoc analysis
<ul>
<li>One large D3 plot, just with user data plot
<ul>
<li>Option to draw where the user expects to see changepoints</li>
</ul>
</li>
<li>Quality metrics associated with those expectations (how close to expected are the predicted changepoints?)</li>
</ul>
</li>
</ul>
</li>
<li>Sharing/download page
<ul>
<li>Export all results (.Rdata)</li>
<li>Export input data and graph (.zip of .csv)</li>
<li>Export graph data (.csv)</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
<div id="coding-environment-notes" class="section level2">
<h2 class="hasAnchor">
<a href="#coding-environment-notes" class="anchor"></a>Coding environment notes</h2>
<ul>
<li><p>Developing on this GitHub repository, just working off of the <code>master</code> branch.</p></li>
<li><p>Use <a href="https://rstudio.github.io/renv/">renv</a> for dependency management/reproducibility OR, for even more, maybe use <a href="https://thinkr-open.github.io/golem/">golem</a>.</p></li>
<li><p>Extra feature: could use <a href="https://github.com/rstudio/shinymeta">shinymeta</a> to produce PDF/Rmd files based on current Shiny session, which is handy. Like a “download report”.</p></li>
</ul>
</div>
<div id="questionsnotes-about-gfpop" class="section level2">
<h2 class="hasAnchor">
<a href="#questionsnotes-about-gfpop" class="anchor"></a>Questions/Notes about <code>gfpop</code>
</h2>
<ul>
<li><p>Node names need to be unique, right? So, only one node may be named <code>Up</code>, etc.</p></li>
<li><p>In Figure 11: (Side note: typo in legend: you say <code>in absolute vale</code> instead of <code>in absolute value</code>) You set a constraint that the absolute value of each change must be 1, but the absolute value of the means in the blue model around ~8 (pos in chr2) seems to be a lot smaller–closer to 0.5. What am I missing?</p></li>
<li><p>Can you force a certain number of changepoints? (in the copy number example, you say that you set a beta such that they get 13 segments–did you have to do that iteratively?)</p></li>
</ul>
</div>
<div id="lognotes-meta" class="section level2">
<h2 class="hasAnchor">
<a href="#lognotes-meta" class="anchor"></a>Log/notes (meta)</h2>
<p>05/10:</p>
<ul>
<li>Sketched out basic components.</li>
</ul>
<p>05/11:</p>
<ul>
<li><p>Drew out the “home” page, but noticed that just sketching might not be the idea way to plan out the app. Just the components list does that well enough. Would be nice to go ahead and build a skeleton as an example UI. Had some trouble with that at first, so reviewing the mastering-shiny book.</p></li>
<li><p>First, sitting down and giving the gfpop arxiv paper a read-through.</p></li>
</ul>
<p>05/12:</p>
<ul>
<li><p>Maybe the graph/data plots don’t need to be written in D3 entirely from scratch? It looks like plotly may have some event handling, and I may be able to leverage that: <a href="https://stackoverflow.com/a/47407363/8290926">stackoverflow answer</a>.</p></li>
<li><p>Reviewed the gfpop paper yesterday, need to read through that again and ask questions.</p></li>
<li><p>Also finished reading and doing all exercises for “mastering shiny” chapters 2 and 3, plus Chapter 4.1-4.3. Keeping track of progress in a <a href="https://github.com/julianstanley/mastering-shiny-solutions">personal repo</a>.</p></li>
</ul>
<p>05/13:</p>
<ul>
<li><p>Mostly focused on improving Shiny skills. Attended a Shiny workshop hosted by the Harvard Bioinformatics Core 1PM-4PM, but it was a bit too introductory. Finished reading and completing exerciese for “mastering shiny” chapters 4, 5, 6, and 13.</p></li>
<li><p>I’m going to need some more tangible outputs before Friday’s meeting. Tomorrow, I need to wrap up my main goals for the week. I have a couple basic sketches of the UI: I should finish those up and load them. I also need to re-read the gfpop paper one more time and write down questions. I’ve been thinking about the environment, so I should write down a few notes on that and also read more (Chapters 15 and 16) to make sure I have a plan for using best practices for modules and testing.</p></li>
<li><p>Another note: take a closer look at the <a href="tabler.io">Tabler</a> package.</p></li>
</ul>
<p>05/14:</p>
<ul>
<li><p>Off to a good start, finished up initial UI sketches. Also added some coding environment nodes.</p></li>
<li><p>Note: The idea of using plotly instead of base D3 seems to be gaining more traction in my mind. You can customize tooltips with plotly, and add custom event handlers. Carson did a fantastic job documenting the package <a href="https://plotly-r.com/">here</a>. I bet I can do the main interactive changepoint visualization with it. But, the graph-making visualization may still need to be base D3–meaning those graphs would need to be seperated.</p></li>
<li><p>I added some questions about the <code>gfpop</code> paper and package, but I think I still need a bit more time to read the manuscript through a few more times and get a better feel for the aspects of the work that will be practical in designing a good GUI.</p></li>
</ul>
<div id="notes-from-morning-meeting" class="section level3">
<h3 class="hasAnchor">
<a href="#notes-from-morning-meeting" class="anchor"></a>Notes from morning meeting</h3>
<ul>
<li>Calls can be around once per week, but skipping weeks is okay. Maybe next meeting should be around the first week of coding. Meetings can be with just Toby or Guillem, don’t need to be with both.</li>
</ul>
<p>Goals:</p>
<ul>
<li><p>Get comfortable with project integration and package management best practices.</p></li>
<li><p>Can also get in touch with the broader shiny community.</p></li>
<li><p>Generally, focus on keeping comments and records in the open: e.g. make issues on the shiny repo.</p></li>
<li><p>First order of business: put an issue on the visNetwork repo explaining what we would like to do. Are our goals reasonable with visNetwork?</p></li>
<li><p>Carefully read the plotly book, especially the data visualization chapters, especially bits about client-side interactivity (this is how we keep things running quickly!)</p></li>
<li><p>On analysis page: add a dropbox to change the penalty score</p></li>
<li><p>Would also be nice to keep track of previously-run analyses to make them easy to re-run/refer to.</p></li>
<li><p>Would also be nice to have a button to get the R code corresponding to the current graph constraint (this corresponds to a common use case where you have the R code with a current graph, and just want to modify that).</p></li>
<li><p>Analysis and annotation should be the same plot, but should maybe have a button to hide the gfpop results and just add annotation.</p></li>
</ul>
<p>Additional things to look into:</p>
<ul>
<li>Testing! You should be thinking about testing. Look at shinytest and rselenium to get an idea of how that works. It will fireup a headless browser, navigate to the webpage, and automatically test interactive components–e.g. draw on the screen and make sure that a certain number of datapoints appear. Is this compatible with Shiny? You should take a look.</li>
</ul>
<div id="misc" class="section level4">
<h4 class="hasAnchor">
<a href="#misc" class="anchor"></a>Misc</h4>
<ul>
<li>For the rest of the day and tomorrow, will focus on just doing some general reading. Then, on Sunday (05/17), I’ll get started formulating next week’s goals. That’s a wrap for the week!</li>
</ul>
<p>05/17:</p>
<p>Focused on learning more about Plotly. Started a datacamp course that seems helpful, keeping track of progress <a href="https://github.com/julianstanley/intermediate-interactive-dataviz-plotly">in a GitHub repo</a>. Tomorrow: think more about this week’s goals, and then learn more!</p>
</div>
</div>
</div>
<div id="may-18---may-24" class="section level2">
<h2 class="hasAnchor">
<a href="#may-18---may-24" class="anchor"></a>May 18 - May 24</h2>
<div id="goals-1" class="section level3">
<h3 class="hasAnchor">
<a href="#goals-1" class="anchor"></a>Goals</h3>
<p>This is mostly a learning week. In my original proposal, I thought that the coding period would begin this week. Since I have another two weeks, I’m going to focus on developing a good base.</p>
<ul>
<li>Incorporate Friday’s feedback into GUI layout sketches.</li>
<li>Read more closely into the visNetwork package, potentially post an issue on the GitHub repo.</li>
<li>Learn more about Plotly and Shiny.</li>
</ul>
</div>
<div id="revised-sketches" class="section level3">
<h3 class="hasAnchor">
<a href="#revised-sketches" class="anchor"></a>Revised sketches</h3>
<p>For more information, see <a href="https://github.com/julianstanley/gfpopgui/issues/3">issue #3</a>.</p>
<p>Just needed to revise the analysis tab:</p>
<div class="figure">
<img src="https://github.com/julianstanley/gfpopgui/raw/master/docs/assets/may18_may24/analysis_revised.JPG" alt=""><p class="caption">revised analysis tab layout</p>
</div>
</div>
<div id="visnetwork-reading" class="section level3">
<h3 class="hasAnchor">
<a href="#visnetwork-reading" class="anchor"></a>visNetwork reading</h3>
<p>For more information, see <a href="https://github.com/julianstanley/gfpopgui/issues/2">issue #2</a>.</p>
<p>I’ve made some progress on visNetwork. I’m now able to record changes to the visNetwork graph, based on <a href="https://stackoverflow.com/questions/54846529/how-to-extract-and-save-visnetwork-manipulation-changes-in-shiny">this stackoverflow post</a>,</p>
</div>
<div id="plotly-and-shiny-reading" class="section level3">
<h3 class="hasAnchor">
<a href="#plotly-and-shiny-reading" class="anchor"></a>Plotly and Shiny Reading</h3>
<p>Mostly focused on Plotly, namely following an intermediate course on datacamp. The course helped me a lot in getting more comfortable with plotly syntax and client-side interactivity. My notes <a href="https://github.com/julianstanley/intermediate-interactive-dataviz-plotly">are here</a>.</p>
</div>
<div id="lognotes-meta-1" class="section level3">
<h3 class="hasAnchor">
<a href="#lognotes-meta-1" class="anchor"></a>Log/notes (meta)</h3>
<p>No need for day-by-day updates this week. Lots of reading and notetaking, but nothing especially noteworthy.</p>
<p>I’m also moving some of this commentary to the “issues” tab of the main repository, even though I will keep documenting progress here. This progress log may evolve into more of a blog, unsure.</p>
<p>Note to self: on May 24th, post on the RStudio community forum asking for help picking a tool to make the constraint graph visualization. The folks over there seem exceptionally helpful.</p>
</div>
</div>
<div id="may-25---may-31" class="section level2">
<h2 class="hasAnchor">
<a href="#may-25---may-31" class="anchor"></a>May 25 - May 31</h2>
<p>This is the last week in the community bonding period! From now on, these timeline posts will be more like a reflective blog than a day-by-day update. Those updates <a href="https://github.com/julianstanley/gfpopgui/issues">have now moved to the issues tab of the repo</a>.</p>
<p>So, I’ll write these posts at the end of the week and highlight some of the things that I learned.</p>
<div id="goals-2" class="section level3">
<h3 class="hasAnchor">
<a href="#goals-2" class="anchor"></a>Goals</h3>
<ul>
<li>Hone in on whether plotly or visNetwork are best for making the constraint graph visualization.</li>
<li>Make a shell application</li>
<li>Start on testing</li>
</ul>
</div>
<div id="quick-reflection" class="section level3">
<h3 class="hasAnchor">
<a href="#quick-reflection" class="anchor"></a>Quick Reflection</h3>
<p>Although this is a community bonding period week, I felt that I needed to get started coding to get a feel for what additional things I needed to learn from the community.</p>
<p>As a result, I think this week was very productive: I built a semi-functional shiny application and feel that I have a very clear direction for this project.</p>
</div>
<div id="golem-and-shiny-project-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#golem-and-shiny-project-structure" class="anchor"></a><code>golem</code> and Shiny project structure</h3>
<p><code>golem</code> is a fantastic package, and <a href="https://thinkr-open.github.io/golem/articles/a_start.html">the documentation</a> by itself was basically all I needed to get started.</p>
<p>It’s been useful to me mostly as just a guideline for <code>shiny</code> best practices. For example, it encouraged me to use <code>usethat</code> functions to setup things like <code>covr</code>, which was much faster and less problematic than setting it up on my own.</p>
<p>It also convinced me to use a proper package structure for my shiny app. So far, that has been great to keep track of dependencies and use build tools.</p>
<p>There were a few things that I struggled with this week that I should share:</p>
<div id="organizing-tabs" class="section level4">
<h4 class="hasAnchor">
<a href="#organizing-tabs" class="anchor"></a>Organizing tabs</h4>
<p>When working on an application with multiple tabs, I don’t think the typical module structure is the best way to organize the tabs.</p>
<p>Instead, just put the ui and server components of each tab in a separate file and folder–for example, the ui for the home tab goes in <code>R/ui/tab_home.R</code>. Then, in your main <code>app_ui.R</code> file, just call:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/source.html">source</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">"R"</span>, <span class="st">"ui"</span>, <span class="st">"tab_home.R"</span>), <span class="kw">local</span> <span class="kw">=</span> <span class="fl">TRUE</span>)$<span class="no">value</span></pre></body></html></div>
<p>to source the file. Nothing fancy, just keeping different tabs in different files.</p>
</div>
</div>
<div id="sourcing-seperate-html-files" class="section level3">
<h3 class="hasAnchor">
<a href="#sourcing-seperate-html-files" class="anchor"></a>Sourcing seperate HTML files</h3>
<p>My home tab has a big block of HTML that I wanted to move to a separate file.</p>
<p><code>golem</code> creates a shortcut from <code>/inst/app/www</code> to just <code>www</code>, so I sourced my HTML file like:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu">includeHTML</span>(<span class="st">"www/lorem.html"</span>)</pre></body></html></div>
<p>That worked! But, one of the <code>golem</code> recommended tests failed.</p>
<p>That’s because sourcing the file like that was visible from the web browser, but not to the R interpreter.</p>
<p>Instead, I needed to use <code>system.file</code> to source the file:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu">includeHTML</span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"app/www/lorem.html"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"gfpopgui"</span>))</pre></body></html></div>
</div>
</div>
<div id="travis-ci-and-automated-shinyapp-io-builds" class="section level2">
<h2 class="hasAnchor">
<a href="#travis-ci-and-automated-shinyapp-io-builds" class="anchor"></a>Travis CI, and automated shinyapp.io builds</h2>
<p>This week, I setup my package to build/test through TravisCI, check through <code>covr</code>, and auto-deploy to shinyapps.io.</p>
<div id="cachepackages-and-r_github_packages" class="section level3">
<h3 class="hasAnchor">
<a href="#cachepackages-and-r_github_packages" class="anchor"></a>cache:packages and r_github_packages:</h3>
<p>This is worth its own header. In my last R project, I didn’t have the <code>cache:packages</code> option set. However, caching packages speeds up the build <em>so, so much</em>.</p>
<p>e.g.:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">language</span><span class="kw">:</span><span class="at"> R</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">cache</span><span class="kw">:</span><span class="at"> packages</span></span></code></pre></div>
<p>I also learned about the <code>r_github_packages</code> option, which lets you install an R package from GitHub on the Travis node, e.g.:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">r_github_packages</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="at">  </span><span class="kw">-</span><span class="at"> julianstanley/gfpopgui</span></span></code></pre></div>
<p>However, my auto-deploy to shinyapps.io had some weird problems.</p>
</div>
<div id="visnetwork-works" class="section level3">
<h3 class="hasAnchor">
<a href="#visnetwork-works" class="anchor"></a>visNetwork works!</h3>
<p>For the past few weeks, I’ve been trying to figure out how to make a proper, interactive, editable plot for the constraint graph.</p>
<p>This week, thanks to some updates on the visNetwork package, I have that!</p>
<p>It’s still not perfect, and there’s a small bug in the ability to edit edges, but it’s good enough for now.</p>
<p>The new features is the ability to add custom edit attributes to graphs–and to be able to edit edge attributes at all.</p>
<p>So, for example, let’s say I wanted users to be able to edit a nodeParam in nodes and an edgeParam in edges, I could add the <code>editNodeCols</code> and <code>editEdgeCols</code> parameters in <code>visOptions</code> like this:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu">visNetwork</span>(<span class="kw">nodes</span> <span class="kw">=</span> <span class="no">nodes</span>, <span class="kw">edges</span> <span class="kw">=</span> <span class="no">edges</span>) <span class="kw">%&gt;%</span>
  <span class="fu">visOptions</span>(<span class="kw">manipulation</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">enabled</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">editEdgeCols</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"label"</span>, <span class="st">"to"</span>, <span class="st">"from"</span>, <span class="st">"edgeParam"</span>),
    <span class="kw">editNodeCols</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"label"</span>, <span class="st">"nodeParam"</span>)
  ))</pre></body></html></div>
<p>But, even though this feature allows users to edit nodes, it doesn’t provide any straightforward functionality to update the node and edge data after the user edits it in a shiny app. That’s where the <code>input$[graph_name]_graphChange</code> element comes in!</p>
<p>If my graph is named <code>input$mygraph</code>, then user edit events to that graph will show up in <code>input$mygraph_graphChange</code>! <code>input$mygraph_graphChange</code> will be a list, where the <code>cmd</code> parameter of that list specifies the user event, and other parameters specify changes to the node/edge.</p>
<p>So, to respond to a user event editing an edge, I can use <code>observeEvent</code> from shiny as follows:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu">observeEvent</span>(<span class="no">input</span>$<span class="no">mygraph_graphChange</span>, {
  <span class="no">event</span> <span class="kw">&lt;-</span> <span class="no">input</span>$<span class="no">mygraph_graphChange</span>
  <span class="no">cmd</span> <span class="kw">&lt;-</span> <span class="no">event</span>$<span class="no">cmd</span>

  <span class="kw">if</span> (<span class="no">cmd</span> <span class="kw">==</span> <span class="st">"editEdge"</span>) {
    <span class="no">mygraph_edges</span> <span class="kw">&lt;-</span> <span class="no">mygraph_edges</span> <span class="kw">%&gt;%</span>
      <span class="fu">mutate_cond</span>(<span class="no">id</span> <span class="kw">==</span> <span class="no">event</span>$<span class="no">id</span>,
        <span class="kw">to</span> <span class="kw">=</span> <span class="no">event</span>$<span class="no">to</span>, <span class="kw">from</span> <span class="kw">=</span> <span class="no">event</span>$<span class="no">from</span>,
        <span class="kw">label</span> <span class="kw">=</span> <span class="no">event</span>$<span class="no">label</span>) <span class="co"># etc with other parameters</span>
  }
})</pre></body></html></div>
<p>Where <code>mutate_cond</code> is a nice fancy custom modification on <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate</a></code> that edits rows based on a parameter, instead of columns. You can define it like this:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">mutate_cond</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">.data</span>, <span class="no">condition</span>, <span class="no">...</span>, <span class="no">envir</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html">parent.frame</a></span>()) {
  <span class="no">condition</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/substitute.html">substitute</a></span>(<span class="no">condition</span>), <span class="no">.data</span>, <span class="no">envir</span>)
  <span class="no">.data</span>[<span class="no">condition</span>, ] <span class="kw">&lt;-</span> <span class="no">.data</span>[<span class="no">condition</span>, ] <span class="kw">%&gt;%</span> <span class="fu">mutate</span>(<span class="no">...</span>)
  <span class="no">.data</span>
}</pre></body></html></div>
<p>So, thanks to these features, our editable graph is now feasible! I’ll need to read up a bit more on visNetworkProxy to make the graph updates more efficient, and work on making the graph prettier and more user-friendly (and implement it in the first place)!</p>
<p>While I haven’t put the graph into production yet, I wrote a quick <a href="https://gist.github.com/julianstanley/74321b6b75584e9e17cd68666b2177c2">proof-of-concept gist</a>, if you want to take a look!</p>
</div>
<div id="issues-branches-and-pull-requests" class="section level3">
<h3 class="hasAnchor">
<a href="#issues-branches-and-pull-requests" class="anchor"></a>Issues, branches, and pull requests</h3>
<div id="issues" class="section level4">
<h4 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h4>
<p>Finally, this week has really increased my appreciation for using issues, branches, and pull requests. In fact, I think I’ve been using them a lot more than most users (hopefully not too much!)</p>
<p>Just this week, I opened 12 issues in gfpopgui, as well as <a href="https://github.com/vrunge/gfpop/issues/11">one in gfpop</a>, <a href="https://github.com/rstudio/shinytest/issues/312">one in shinytest</a>, and one in <a href="https://github.com/datastorm-open/visNetwork/issues/377">visNetwork</a>, and also <a href="https://github.com/ThinkR-open/golem/issues/263">commented on some in golem</a>.</p>
<p>I think that creating issues for my own repository has been a fantastic way to keep track of my progress and thoughts, which has helped me be more focused and productive. And creating issues in other repositories, as well as participating in conversations in the <a href="https://community.rstudio.com">RStudio community forums</a> has really helped me to connect with the open-source community, and think more critically about how to ask good questions and contribute thoughtfully.</p>
<p>Finally, just seeing public comments on issues tabs and forums has had a big impact on the way that I code and think. There are so many good suggestions and helpful tidbits out there in the public!</p>
</div>
<div id="branches-and-pull-requests" class="section level4">
<h4 class="hasAnchor">
<a href="#branches-and-pull-requests" class="anchor"></a>Branches and Pull Requests</h4>
<p>I think I had previously underestimated the utility of creating branches and pull requesting on repositories where I am the primary contributor.</p>
<p>While branches <em>are</em> most helpful for projects with a group of simultaneous contributors, I have found them really helpful for myself this week.</p>
<p>In previous projects, I often found myself panicking when I made build-breaking changes to the master branch. Then, in that panic, I would revert some commits or have a long string of commits as I tried to fix the repo.</p>
<p>With branches that build independently, I can work through problems like that in an isolated environment, and then delete changes and/or rebase before merging that branch into master, being confident that I’m pushing polished changes.</p>
</div>
</div>
<div id="testing" class="section level3">
<h3 class="hasAnchor">
<a href="#testing" class="anchor"></a>Testing</h3>
<p>I’m still working on testing. But, in short, <code>shinytest</code> seems awesome for most testing purposes. However, it fails when you need your tests to include client-side interactions, like panning/zooming in a plotly plot. For those interactions, RSelenium seems like the best option. I’m going to work more on getting RSelenium set up, and hopefully will write more about that in the timeline blog next week!</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Julian Stanley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
